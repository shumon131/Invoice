{% extends "base.html" %}
{% block content %}
<div class="card">
  <div class="card-body">
    <div class="d-flex justify-content-between">
      <div>
        <h4>Invoice #{{ invoice.id }}</h4>
        <p><strong>Client:</strong> {{ invoice.client_name }}<br>
        <strong>Date:</strong> {{ invoice.date or '-' }}</p>
      </div>
      <div class="text-end">
        <h5>Total: ${{ '%.2f' % invoice.total(tax_rate) }}</h5>
        <a class="btn btn-outline-secondary btn-sm" onclick="window.print()">Print / Save PDF</a>
      </div>
    </div>

    <table class="table mt-3">
      <thead>
        <tr><th>Description</th><th class="text-end">Qty</th><th class="text-end">Unit</th><th class="text-end">Total</th></tr>
      </thead>
      <tbody>
        {% for it in invoice.items %}
        <tr>
          <td>{{ it.description }}</td>
          <td class="text-end">{{ '%.2f' % it.quantity }}</td>
          <td class="text-end">${{ '%.2f' % it.unit_price }}</td>
          <td class="text-end">${{ '%.2f' % it.total() }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="d-flex justify-content-end">
      <div style="width:300px">
        <table class="table table-borderless">
          <tr><td>Subtotal</td><td class="text-end">${{ '%.2f' % invoice.subtotal() }}</td></tr>
          <tr><td>Tax</td><td class="text-end">${{ '%.2f' % invoice.tax(tax_rate) }}</td></tr>
          <tr><th>Total</th><th class="text-end">${{ '%.2f' % invoice.total(tax_rate) }}</th></tr>
        </table>
      </div>
    </div>

    {% if invoice.notes %}
    <div class="mt-3">
      <strong>Notes</strong>
      <p>{{ invoice.notes }}</p>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
